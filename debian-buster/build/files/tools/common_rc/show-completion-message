#!/bin/bash -e

cat - <<'EOF'

   .______   .______        ______          __   _______   ______ .___________.
   |   _  \  |   _  \      /  __  \        |  | |   ____| /      ||           |
   |  |_)  | |  |_)  |    |  |  |  |       |  | |  |__   |  ,----'`---|  |----`
   |   ___/  |      /     |  |  |  | .--.  |  | |   __|  |  |         |  |
   |  |      |  |\  \----.|  `--'  | |  `--'  | |  |____ |  `----.    |  |
   | _|      | _| `._____| \______/   \______/  |_______| \______|    |__|

     _______.___________.    ___      .______     .___________. _______  _______
    /       |           |   /   \     |   _  \    |           ||   ____||       \
   |   (----`---|  |----`  /  ^  \    |  |_)  |   `---|  |----`|  |__   |  .--.  |
    \   \       |  |      /  /_\  \   |      /        |  |     |   __|  |  |  |  |
.----)   |      |  |     /  _____  \  |  |\  \----.   |  |     |  |____ |  '--'  |
|_______/       |__|    /__/     \__\ | _| `._____|   |__|     |_______||_______/


Now you can connect via http or ssh.
EOF

if [ -d /home/project/src ]
then
	cd /home/project/src
	domain=$(
		git remote -v 2>/dev/null \
		| grep 'origin\s.*\.git' \
		| head -n 1 | cut -d":" -f2 \
		| sed -nr 's#.*(^|/)([a-zA-Z0-9_-]*)/([a-zA-Z0-9_-]*)\.git.*#\3.\2.test#p'
	)
	if [ -n "$domain" ]
	then
		echo
		echo -e "\e[1m http://$domain/ \e[0m"
		echo " ssh project@dev.$domain "
		echo
		echo
	fi
fi

